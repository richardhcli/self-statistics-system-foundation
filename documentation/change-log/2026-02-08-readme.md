# Change Log â€” 2026-02-08

## Datastores Debug View & Persistence Synchronization

### New Features
- **Datastores Debug View**: Added ability to inspect Local vs. Backend state in a split panel.
- **Force Sync Panel**: Implemented "Fetch from Backend" and "Apply to Stores" manual synchronization tools.
- **Data Inspection**: Added `json-container-renderer` for recursive JSON data visualization with delete actions.
- **Backend Visibility**: Added `DatabaseView` to list and manage Firestore collections/documents directly from the debug interface.

### Bug Fixes
- **AI Config Persistence**: Fixed `actions` being lost during hydration by adding `partialize` and `merge` to `useAiConfigStore`. This resolved the `actions.setConfig is not a function` crash during Force Sync.

### Documentation
- Detailed feature spec and implementation details: [2026-02-08-DATASTORES_DEBUG_VIEW.md](./2026-02-08-DATASTORES_DEBUG_VIEW.md)

Journal read-aside migration cleanup removed the legacy journal migration helper and clarified that IndexedDB is a persistent cache, not the source of truth, aligning the persistence layer with the storage blueprint.

## graph storage in database first

CDAG topology now follows the read-aside architecture with Firebase-backed services, structure-first caching, and legacy sync removal. The store persists only data (nodes, edges, structure, metadata) and integrates a structure subscription hook for graph views.

Graph storage paths were standardized to `users/{uid}/graphs/cdag_topology` with nodes/edges in subcollections, eliminating invalid document references in the visual graph.
